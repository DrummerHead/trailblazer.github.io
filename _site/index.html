<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> - </title>
    <meta name="description" content=" - " />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content=", " />

    <!-- CSS  Get: http://www.google.com/fonts/
    http://stackoverflow.com/questions/7985081/how-to-deploy-a-jekyll-site-locally-with-css-js-and-background-images-included
    ================================================== -->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,700,800|Raleway:400,200,700" rel="stylesheet" type="text/css">
    <!-- Fount Awesome -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="stylesheet" href="css/style.css" />
    <link rel="shortcut icon" href="favicon.ico">
    <meta property="og:title" content=""/>
    <meta property="og:site_name" content=" - "/>
    <meta property="og:url" content=" - "/>
    <meta property="og:description" content=""/>
    <meta property="og:image" content=""/>
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">
    <script src="bower_components/modernizr/modernizr.js"></script>
  </head>

  <body>
    <!-- Top Bar -->
    <nav class="top-bar" data-topbar role="navigation">
  <ul class="title-area">
    <li class="name">
      <h1><a href="#">Trailblazer</a></h1>
    </li>
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
  </ul>

  <section class="top-bar-section">
    <ul class="right">
      <li class="active"><a href="#">Right Button Active</a></li>
    </ul>
  </section>
</nav>


    <!-- Hero -->
    <div class="hero">
  <div class="hero-unit">
    <div class="row">
      <div class="columns">
        <h1 id="project_title">
          <!-- <a href="#"><img src="/images/icon_trb.png">
          </a> -->
          Trailblazer
        </h1>
        <h2>A new architecture for Rails</h2>
      </div>
    </div>
  </div>
</div>



    <div class="row">
      <div class="columns large-3">
        <!--    <a href="https://github.com/trailblazer/www.trailblazerb.org" class="button">View on GitHub</a>
        <a class="button" href="https://github.com/trailblazer/www.trailblazerb.org/zipball/master">Download this project as a .zip file</a>
        <a class="button" href="https://github.com/trailblazer/www.trailblazerb.org/tarball/master">Download this project as a tar.gz file</a> -->

<ul class="side-nav">
  <li><a href="#">Link 1</a></li>
  <li><a href="#">Link 2</a></li>
  <li><a href="#">Link 3</a></li>
  <li><a href="#">Link 4</a></li>
</ul>

      </div>
      <div class="columns medium-9">
        <h1 id="trailblazer">Trailblazer</h1>

<p>Trailblazer gives you a high-level architecture for web applications.</p>

<p>Logic that used to get violently pressed into MVC is restructured and decoupled from the Rails framework. New abstraction layers like operations, form objects, authorization policies, data twins and view models guide you towards a better architecture.</p>

<p><img src="images/Trb-Stack.png" alt="" class="left" /></p>

<p>By applying encapsulation and good OOP, Trailblazer maximizes reusability of components, gives you a more intuitive structure for growing applications and adds conventions and best practices on top of Railsâ€™ primitive MVC stack.</p>

<p>A polymorphic architecture sitting between controller and persistence is designed to handle many different contexts and helps to minimize code to handle various user roles and edge cases.</p>

<div class="row">
  <h3>Controller</h3>

  <div class="box">
    <div class="description">
      <p>Controllers in Trailblazer end up as lean HTTP endpoints: they instantly dispatch to an operation.</p>

      <p>No business logic is allowed in controllers, only HTTP-related tasks like redirects.</p>
    </div>
  </div>

  <div class="code-box">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">CommentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">new</span>
    <span class="n">form</span> <span class="no">Comment</span><span class="o">::</span><span class="no">Update</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="n">run</span> <span class="no">Comment</span><span class="o">::</span><span class="no">Update</span> <span class="k">do</span> <span class="o">|</span><span class="n">op</span><span class="o">|</span>
      <span class="k">return</span> <span class="n">redirect_to</span> <span class="n">comments_path</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">render</span> <span class="ss">:new</span>
  <span class="k">end</span></code></pre></div>

  </div>
</div>

<div class="row">
    <div class="left-code">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">has_many</span>   <span class="ss">:users</span>
  <span class="n">belongs_to</span> <span class="ss">:thing</span>

  <span class="n">scope</span> <span class="ss">:recent</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span></code></pre></div>

  </div>


  <div class="right-text">
    <h3>Model</h3>

    <div class="description">
      <p>Models only contain associations, scopes and finders. Solely persistence logic is allowed.</p>

      <p>That's right: No callbacks, no validations, no business logic in models. </p>
    </div>
  </div>
</div>

<div class="row">
  <h3>Operation</h3>

  <div class="box">
    <div class="description">
      <p>Per public action, there's one operation orchestrating the business logic.</p>
      <p>This is where your domain code sits: Validation, callbacks, authorization and application code go here.</p>
      <p>Operations are the only place to write to persistence via models.</p>
    </div>

    <a href="/gems/operation">Learn more</a>
  </div>

  <div class="code-box">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Comment</span><span class="o">::</span><span class="no">Create</span> <span class="o">&lt;</span> <span class="no">Trailblazer</span><span class="o">::</span><span class="no">Operation</span>
  <span class="n">contract</span> <span class="k">do</span>
    <span class="n">property</span> <span class="ss">:body</span>
    <span class="n">validates</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">length</span><span class="p">:</span> <span class="p">{</span><span class="ss">maximum</span><span class="p">:</span> <span class="mi">160</span><span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">validate</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

    <span class="k">else</span>

    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

  </div>
</div>

<div class="row">
  <div class="left-code-50">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">contract</span> <span class="k">do</span>
  <span class="n">property</span> <span class="ss">:body</span>
  <span class="n">validates</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">length</span><span class="p">:</span> <span class="p">{</span><span class="ss">maximum</span><span class="p">:</span> <span class="mi">160</span><span class="p">}</span>

  <span class="n">property</span> <span class="ss">:author</span> <span class="k">do</span>
    <span class="n">property</span> <span class="ss">:email</span>
    <span class="n">validates</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">email</span><span class="p">:</span> <span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

  </div>


  <div class="right-text">
    <h3>Form</h3>

    <div class="description">
      <p>Every operation contains a form object. </p>
        <p>This is the place for validations.</p>
      <p>Forms are plain Reform classes and allow all features you know from the popular form gem.</p>
      <p>Forms can also be rendered using form builders like Formtastic or Simpleform.</p>
    </div>
  </div>
</div>

<div class="row">
  <h3>Callback</h3>

  <div class="box">
    <div class="description">
      <p>Callbacks are invoked from the operation, where you want them to be triggered.</p>
      <p>They can be configured in a separate Callback class.</p>
      <p>Callbacks are completely decoupled and have to be invoked manually, they won't run magically.</p>
    </div>
  </div>

  <div class="code-box">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">callback</span> <span class="k">do</span>
  <span class="n">on_create</span> <span class="ss">:notify_owner!</span>

  <span class="n">property</span> <span class="ss">:author</span> <span class="k">do</span>
    <span class="n">on_add</span> <span class="ss">:reset_authorship!</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

  </div>
</div>

<div class="row">
  <div class="left-code">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">policy</span> <span class="k">do</span>
  <span class="n">user</span><span class="o">.</span><span class="n">admin?</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">post</span><span class="o">.</span><span class="n">published?</span>
<span class="k">end</span></code></pre></div>

  </div>


  <div class="box">
    <h3>Policy</h3>

    <div class="description">
      <p>Policies allow authentication on a global or fine-granular level.</p>
      <p>Again, this is a completely self-contained class without any coupling to the remaining tiers.</p>
    </div>
  </div>
</div>

<div class="row">
  <h3>View Model</h3>

  <div class="box">
    <div class="description">
      <p>Cells encapsulate parts of your UI in separate view model classes and introduce a widget architecture.</p>
      <p>Views are logic-less. There can be deciders and loops. Any method called in the view is directly called on the cell instance.</p>
      <p>Rails helpers can still be used but are limited to the cell's scope.</p>
    </div>
  </div>


  <div class="code-box">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Comment</span><span class="o">::</span><span class="no">Cell</span> <span class="o">&lt;</span> <span class="no">Cell</span><span class="o">::</span><span class="no">ViewModel</span>
  <span class="n">property</span> <span class="ss">:body</span>
  <span class="n">property</span> <span class="ss">:author</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="n">render</span>
  <span class="k">end</span>

<span class="kp">private</span>
  <span class="k">def</span> <span class="nf">author_link</span>
    <span class="n">link_to</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">author</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">author</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

  </div>

  <div class="code-box">
    
<div class="highlight"><pre><code class="language-erb" data-lang="erb"><span class="x">&lt;div class=&quot;comment&quot;&gt;</span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">body</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  By </span><span class="cp">&lt;%=</span> <span class="n">author_link</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">&lt;/div&gt;</span></code></pre></div>

  </div>

</div>

<div class="row">
  <div class="left-code-50">
    
<div class="highlight"><pre><code class="language-erb" data-lang="erb"><span class="x">&lt;h1&gt;Comments for </span><span class="cp">&lt;%=</span> <span class="vi">@thing</span><span class="o">.</span><span class="n">name</span> <span class="cp">%&gt;</span><span class="x">&lt;/h1&gt;</span>

<span class="x">This was created </span><span class="cp">&lt;%=</span> <span class="vi">@thing</span><span class="o">.</span><span class="n">created_at</span> <span class="cp">%&gt;</span><span class="x"></span>

<span class="cp">&lt;%=</span> <span class="n">concept</span><span class="p">(</span><span class="s2">&quot;comment/cell&quot;</span><span class="p">,</span>
  <span class="ss">collection</span><span class="p">:</span> <span class="vi">@thing</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x"></span></code></pre></div>

  </div>


  <div class="box">
    <h3>Views</h3>

    <div class="description">
      <p>Controller views are still ok to use.</p>
      <p>However, replacing huge chunks with cells is encouraged and will simplify your views.</p>
    </div>
  </div>
</div>

<div class="row">
  <h3>Representer</h3>

  <div class="box">
    <div class="description">
      <p>Document APIs like JSON or XML are implemented with Representers which parse and render documents.</p>
      <p>Representers are plain Roar classes. They can be automatically infered from the contract schema.</p>
      <p>You can use media formats, hypermedia and all other Roar features.</p>
    </div>
  </div>


  <div class="code-box">

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">representer</span> <span class="k">do</span>
  <span class="kp">include</span> <span class="no">Roar</span><span class="o">::</span><span class="no">JSON</span><span class="o">::</span><span class="no">HAL</span>

  <span class="n">property</span> <span class="ss">:body</span>
  <span class="n">property</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">embedded</span><span class="p">:</span> <span class="kp">true</span>

  <span class="n">link</span><span class="p">(</span><span class="ss">:self</span><span class="p">)</span> <span class="p">{</span> <span class="n">comment_path</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span></code></pre></div>

  </div>
</div>

<div class="row">
  <div class="left-code">
    
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Comment</span><span class="o">::</span><span class="no">Update</span> <span class="o">&lt;</span> <span class="no">Create</span>
  <span class="n">policy</span> <span class="k">do</span>
    <span class="n">is_owner?</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

  </div>

  <h3>Inheritance</h3>

  <div class="right-text">
    <div class="description">
      <p>Trailblazer reintroduces object-orientation.</p>

      <p>For each public action, there's one operation class.</p>

      <p>Operations inherit contract, policies, representers, etc. and can be fine-tuned for their use case.</p>
    </div>
  </div>
</div>

<div class="row">
  <h3>Polymorphism</h3>

  <div class="box">
    <div class="description">
      <p>Operations, forms, policies, callbacks are all designed for a polymorphic environment.</p>
      <p>Different roles, contexts or rules are handled with subclasses instead of messy <code>if</code>s.</p>
    </div>
  </div>


  <div class="code-box">

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Comment</span><span class="o">::</span><span class="no">Create</span> <span class="o">&lt;</span> <span class="no">Trailblazer</span><span class="o">::</span><span class="no">Operation</span>
  <span class="n">build</span> <span class="k">do</span> <span class="o">|</span><span class="n">params</span><span class="o">|</span>
    <span class="no">Admin</span> <span class="k">if</span> <span class="n">params</span><span class="o">[</span><span class="ss">:current_user</span><span class="o">].</span><span class="n">admin?</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">Admin</span> <span class="o">&lt;</span> <span class="no">Create</span>
    <span class="n">contract</span> <span class="k">do</span>
      <span class="n">remove_validations!</span> <span class="ss">:body</span>
    <span class="k">end</span>
  <span class="k">end</span></code></pre></div>

  </div>
</div>

<h2 id="file-layout">File Layout</h2>

<p>In Trailblazer, files that belong to one group are called <em>concepts</em>. They sit in one directory as Trailblazer introduces and new, more intuitive and easier to navigate file structure.</p>

<pre>
app
â”œâ”€â”€ concepts
â”‚   â”œâ”€â”€ comment
â”‚   â”‚   â”œâ”€â”€ crud.rb
â”‚   â”‚   â”œâ”€â”€ cell.rb
â”‚   â”‚   â”œâ”€â”€ views
â”‚   â”‚   â”‚   â”œâ”€â”€ show.haml
â”‚   â”‚   â”‚   â”œâ”€â”€ list.haml
â”‚   â”‚   â”‚   â”œâ”€â”€ comment.css.sass
â”‚   â”‚   â””â”€â”€ twin.rb
â”‚   â”‚
â”‚   â””â”€â”€ post
â”‚       â””â”€â”€ crud.rb
</pre>

<h2 id="gems">Gems</h2>

<p>Trailblazer is an architectural style. However, what sounds nice in theory is backed by gems for you to implement that style.</p>

<p>The gems itself are completely self-contained, minimalistic and solve just one particular problem. Many of them have been in use in thousands of production sites for years.</p>

<p>All gems are documented here.</p>

<ul>
  <li><a href="/gems/cells">Cells</a></li>
  <li><a href="gems/operation">Operation</a></li>
  <li><a href="gems/reform">Reform</a></li>
  <li><a href="gems/representable">Representable</a></li>
  <li>Roar</li>
  <li><a href="gems/disposable">Disposable</a></li>
</ul>

<!-- ## Testimonials

* _"At some point of time we started to decouple our form objects from models. Things got a lot easier when we found out there is a ready to use solution which solves our exact problem. That was Reform. Soon after, we started using all other parts of Trailblazer and haven't regretted a second of our time we spent using it."_ Â—-- **Igor Pstyga, Shop Hers Inc.**

* _"Here at Chefsclub, we are very happy with Trailblazer. Our application already has 32 concepts, 130+ operations, and Cells surprised us as an awesome feature. We feel pretty safe with it."_ -- **Paulo Fabiano Langer, Chefsclub**

* _"Trailblazer helps organize my code, the book showed me how. You can assume what each component does by its name, it's very easy and intuitive, it should be shipped as an essential part of Rails."_ -- **Yuri Freire Lima, AzClick** -->

      </div>
    </div>

    <!-- The Book -->
    <div class="row">
      <div class="columns">
        <h2>The Book</h2>
<div class="row">
  <div class="columns medium-6">
    <a href="https://leanpub.com/trailblazer">
    <img src="images/3dbuch-freigestellt.png" />
    </a>
  </div>

  <div class="columns medium-6">
    <p>Yes, there's a book!</p>
    <p>Written by the busy creator of Trailblazer, it is about 70% finished and will get another 150 pages, making it 300 pages full of wisdom about Trailblazer and all the gems.</p>

    <p>If you want to learn about this project and if you feel like supporting Open-Source, please <a href="https://leanpub.com/trailblazer">buy and read it</a> and let us know what you think.</p>
  </div>
</div>

      </div>
    </div>


    <!-- Testimonials -->
    <div class="row">
      <div class="columns">
        <h2>
  Testimonials
</h2>

<blockquote>
  At some point of time we started to decouple our form objects from models. Things got a lot easier when we found out there is a ready to use solution which solves our exact problem. That was Reform. Soon after, we started using all other parts of Trailblazer and haven't regretted a second of our time we spent using it.
  <cite>Igor Pstyga, Shop Hers Inc</cite>
</blockquote>

<blockquote>
  Here at Chefsclub, we are very happy with Trailblazer. Our application already has 32 concepts, 130+ operations, and Cells surprised us as an awesome feature. We feel pretty safe with it.
  <cite>Paulo Fabiano Langer, Chefsclub</cite>
</blockquote>

<blockquote>
  Trailblazer helps organize my code, the book showed me how. You can assume what each component does by its name, it's very easy and intuitive, it should be shipped as an essential part of Rails.
  <cite>Yuri Freire Lima, AzClick</cite>
</blockquote>

      </div>
    </div>


    <!-- Footer -->
    <footer>
  <div class="row">
    <div class="columns">
      <p>Trailblazer maintained by <a href="https://github.com/trailblazer">trailblazer</a></p>
    </div>
  </div>
</footer>




    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="bower_components/jquery/jquery.js"><\/script>')</script>
    <script src="js/plugins.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="js/script.js"></script>

  </body>
</html>
