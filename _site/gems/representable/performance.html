<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> - </title>
    <meta name="description" content=" - " />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content=", " />

    <!-- CSS  Get: http://www.google.com/fonts/
    http://stackoverflow.com/questions/7985081/how-to-deploy-a-jekyll-site-locally-with-css-js-and-background-images-included
    ================================================== -->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,700,800|Raleway:400,200,700" rel="stylesheet" type="text/css">
    <!-- Fount Awesome -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="stylesheet" href="css/style.css" />

    <!-- Ah, the favicon.
    ================================================== -->
    <link rel="shortcut icon" href="favicon.ico">

    <!-- Open Graph: https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/
    Twitter: https://dev.twitter.com/docs/cards/types/summary-card
    ============================== -->
    <meta property="og:title" content=""/>
    <meta property="og:site_name" content=" - "/>
    <meta property="og:url" content=" - "/>
    <meta property="og:description" content=""/>
    <meta property="og:image" content=""/>
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">
  
    <!-- modernizr
    ================================================== -->
    <script src="bower_components/modernizr/modernizr.js"></script>
  </head>
  <body>

<div class="off-canvas-wrap" data-offcanvas>
  <div class="inner-wrap"> 
    <!-- Add header and nav here  -->
    
        <!--[if lt IE 8]>
            <div data-alert class="alert-box alert radius" class="browsehappy">Please <a href="http://browsehappy.com/">upgrade your browser</a>. <a href="#" class="close">&times;</a></div>
        <![endif]-->

    <header id="header" class="row">

        <div class="small-12 columns">
            <section class="right show-for-medium-up mam">
                <ul class="inline-list">
                    <li><a href="">Home</a></li>
<li><a href="page-html-unit-test.html">Unit test</a></li>
<li><a href="page-foundation-example.html">Foundation</a></li>
<li><a href="page-template-example.html">Template</a></li>
                </ul>
            </section>

            <section class="right show-for-small">
                <ul class="inline-list mam">
                <li>
                    <a class="right-off-canvas-toggle" href="#"><i class="fa fa-bars fa-lg">
                    </i></a>
                </li>
                </ul>
            </section>

            <h1><a href=""></a></h1>

        </div>
    </header>

        <!-- Off Canvas Menu -->
        <aside class="right-off-canvas-menu">
            <!-- navigation list goes here -->
            <ul class="off-canvas-list">
               <li><a href="">Home</a></li>
<li><a href="page-html-unit-test.html">Unit test</a></li>
<li><a href="page-foundation-example.html">Foundation</a></li>
<li><a href="page-template-example.html">Template</a></li>
            </ul>
        </aside>


        <div class="row">
          <section role="main">
            <div class="small-12 columns">
        
              <h1 id="representable-performance">Representable: Performance</h1>

<p>Since Representable 2.2 we provide the feature <code>Representable::Cached</code> which boost up rendering and parsing speed by about 50%.</p>

<p>Instead of unnecessarily creating (sometimes thousands of) nested representers, bindings, and associated instances for every represented object, this is now cached. By making <code>Binding</code> instances stateless we can reuse it.</p>

<p>[Example]<br />
Now, only one binding instance is used to render/parse the entire collection.</p>

<h2 id="usage">Usage</h2>

<p>As per Representable 2.2 this feature is still experimental. Nevertheless, we recommend using it. Note that caching <strong>only works with decorators</strong>.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">AlbumRepresenter</span> <span class="o">&lt;</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Decorator</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Hash</span>
  <span class="n">feature</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Cached</span>

  <span class="n">property</span> <span class="ss">:name</span>

  <span class="n">collection</span> <span class="ss">:songs</span> <span class="k">do</span>
    <span class="n">property</span> <span class="ss">:title</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>Inserting the module on the top-level representer via <code>feature Representable::Cached</code> will activate caching for all representers in the graph.</p>

<p>[speedup when rendering/parsing]</p>

<h2 id="reusing-the-top-level-representer">Reusing the top-level Representer</h2>

<p>It is also possible to cache the top-level representer and reuse it, e.g. for multiple requests. Of course, doing so is your job. However, once the decorator has been initialized the first time, it can be reused using <code>#update!</code>. Again, doing so is up to you.</p>

<p>[roar-rails support]</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">decorator</span> <span class="o">=</span> <span class="no">AlbumRepresenter</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">album</span><span class="p">)</span>

<span class="n">decorator</span><span class="o">.</span><span class="n">to_json</span> <span class="c1"># first request.</span>

<span class="n">decorator</span><span class="o">.</span><span class="n">update!</span><span class="p">(</span><span class="n">album</span><span class="p">)</span> <span class="c1"># second request.</span>
<span class="n">decorator</span><span class="o">.</span><span class="n">to_json</span></code></pre></div>

<p>Since the decorator and its bindings are stateless, you only need to update the represented object. When rendering or parsing, all changing runtime data is then passed the the respective sub-systems using method arguments. No state is held.</p>

<h2 id="pitfalls">Pitfalls</h2>

<p>Using <code>Cached</code> currently hooks into the <code>Deserializer:#prepare</code> method. If you use <code>:prepare</code> to instantiate different representers per iteration, you might have problems with caching. Iâ€™ll update this soon.</p>

<p>[Graph of caching hierarchy]</p>
 
           
            </div>
          </section>
        </div>
        

        <footer class="site-footer row" role="contentinfo">
        <hr/>
          <div class="large-12 columns">
            <ul class="inline-list">
                <li><a href="">Home</a></li>
<li><a href="page-html-unit-test.html">Unit test</a></li>
<li><a href="page-foundation-example.html">Foundation</a></li>
<li><a href="page-template-example.html">Template</a></li>
            </ul>
            <p class="quiet copyright right"> <a href="https://twitter.com/">
                <i class="fa fa-twitter">
                </i>
             @</a>, <a href="https://github.com//">
                <i class="fa fa-github">
                </i>
             @</a> .</p>
          </div>
        </footer>


      <!-- close the off-canvas menu -->
      <a class="exit-off-canvas"></a>

      </div>
    </div>


    <!-- Loading JavaScripts
    ================================================== -->
    <!-- Zepto (http://zeptojs.com/) is great, but I am sticking with jQuery. Sorry! -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="bower_components/jquery/jquery.js"><\/script>')</script>
    <script src="js/plugins.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="js/script.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', '', 'auto');
      ga('send', 'pageview');
    </script>


  </body>
</html>
