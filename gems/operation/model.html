<h1 id="operationmodel">Operation::Model</h1>

<p>Including <code>Model</code> will add simple CRUD semantics to your operation to find/create a model in <code>#setup!</code>.</p>

<p>Note that this is not limited to ActiveRecord.</p>

<pre><code>class Create &lt; Trailblazer::Operation
  include Model
  model Comment, :create
</code></pre>

<p>Using the <code>::model</code> method you <em>have to</em> define what model class to work with. The second argument specifies the action.</p>

<p>This will override <code>model!</code> as follows.</p>

<pre><code>class Create &lt; Trailblazer::Operation
  def model!
    Comment.new
  end
</code></pre>

<p>The model is automatically created for you in <code>#setup!</code> and hence available in <code>process</code>.</p>

<h2 id="validation">Validation</h2>

<p>In <code>validate</code>, you donâ€™t need to provide the model anymore.</p>

<pre><code>def process(params)
  model #=&gt; &lt;Comment body=""&gt; # created via #model!.
  validate(params[:thing]) do
    ..
  end
end
</code></pre>

<h2 id="actions">Actions</h2>

<p>The following actions for <code>::model</code> are available.</p>

<ul>
  <li><code>:create</code> calls <code>Comment.new</code></li>
  <li><code>:update</code> or <code>:find</code> will execute <code>Comment.find(params[:id])</code></li>
</ul>

<p>In <code>process</code>, you now have a new or existing <code>model</code> available.</p>

<h2 id="api">API</h2>

<p>You may override <code>#instantiate_model!</code>, <code>create_model!</code> or <code>update_model!</code> from the <code>Model</code> module if you need to change behavior.</p>

<h2 id="discussion">Discussion</h2>

<p>Note that this is really simple behavior. Do not use this module when you plan to use more complex models.</p>
